import styles from '@/styles/Home.module.css'
import dayGridPlugin from '@fullcalendar/daygrid'
import interactionPlugin from '@fullcalendar/interaction'
import FullCalendar from '@fullcalendar/react'
import { Grid, Typography } from '@mui/material'

import { Inter } from 'next/font/google'
import Head from 'next/head'
import { useRef } from 'react'

const inter = Inter({ subsets: ['latin'] })

export default function Home() {
  const calendarRef = useRef<React.Ref>()

  const events = [
    { title: 'event 1', date: new Date() },
    { title: 'event 2', date: '2023-06-05' },
  ]
  const headerToolbar = {
    left: 'myCustomButton',
    center: 'title',
  }
  const handleEventClick = (arg: EventClickArg) => {
    if (arg.jsEvent.shiftKey) arg.event.remove()
  }
  const handleEventAdd = (eventAddArg: EventAddArg) => {
    eventAddArg.revert()
  }
  const customButtons = {
    myCustomButton: {
      text: 'Crea evento',
      click: (arg) => {
        console.log('arg:', arg)
        const dateStr = prompt('Enter a date in YYYY-MM-DD format')
        const date = new Date(dateStr + 'T00:00:00') // will be in local time

        if (!isNaN(date.valueOf())) {
          // valid?
          const calendarApi = calendarRef.current.getApi()
          calendarApi.addEvent({
            title: 'dynamic event',
            start: date,
            allDay: true,
          })
        } else {
          alert('Invalid date.')
        }
      },
    },
  }

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <header>
        <Typography variant="h3" gutterBottom align="center">
          Calendario Eventi
        </Typography>
      </header>
      <main>
        <Grid container spacing={2} justifyContent={'center'}>
          <Grid item>
            <FullCalendar
              ref={calendarRef}
              events={events}
              plugins={[dayGridPlugin, interactionPlugin]}
              initialView="dayGridMonth"
              editable={true}
              selectable={true}
              nowIndicator={true}
              headerToolbar={headerToolbar}
              customButtons={customButtons}
              eventClick={handleEventClick}
              eventAdd={handleEventAdd}
            />
          </Grid>
        </Grid>

        <div className={styles.grid}>
          <a href="#" className={styles.card}>
            <h2>Events</h2>
            <p>Find in-depth information about nothing.</p>
          </a>

          <a href="" className={styles.card}>
            <h2>Times</h2>
            <p>Learn about something!!!</p>
          </a>

          <a href="#" className={styles.card}>
            <h2>Dates</h2>
            <p>Discover anything you want.</p>
          </a>

          <a href="#" className={styles.card}>
            <h2>Calendars</h2>
            <p>Calendars, everywhere!.</p>
          </a>
        </div>
      </main>
    </>
  )
}
